#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var yargs_1 = tslib_1.__importDefault(require("yargs"));
var _1 = require("./");
var argv = yargs_1.default
    .option('cwd', { type: 'string', default: process.cwd() })
    .option('exclude', { type: 'string', array: true, alias: 'e' })
    .option('alignLeft', { type: 'boolean' })
    .option('maxDepth', { type: 'number', default: 4, alias: 'd' })
    .option('printOnlyOwner', { type: 'boolean' })
    .option('verbose', { alias: 'v', type: 'boolean' })
    .help('help')
    .help('h').argv;
function main() {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var tree;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, _1.makeTreeWithInfo(argv.cwd, {
                        silent: argv.printOnlyOwner,
                        exclude: argv.exclude,
                    })];
                case 1:
                    tree = _a.sent();
                    if (argv.printOnlyOwner) {
                        return [2 /*return*/, console.log(tree.topContributorDetails.author)];
                    }
                    console.log(_1.printTree(tree, {
                        maxDepth: argv.maxDepth,
                        alignRight: !argv.alignLeft,
                    }));
                    return [2 /*return*/];
            }
        });
    });
}
main().catch(function (e) { return console.error(argv.verbose ? e : e.message); });
//# sourceMappingURL=bin.js.map