// Generated by CoffeeScript 1.6.3
var Q, cli;

Q = require('q');

cli = require('../cli');

module.exports = function(program) {
  return program.command('open [names] [url]').description('open a URL in IE').option('-s, --start', 'start virtual machine if not running').option('-h, --headless', 'start in headless (non-gui) mode if not running').option('-w, --wait', 'wait for IE to exit before returning').action(function(names, url, command) {
    return cli.fail(Q.fcall(function() {
      if (names == null) {
        throw new Error("must specify url");
      }
      if ((url == null) && names.match(/^http/)) {
        url = names;
        names = null;
      }
      return cli.find(names, '!missing').found().maybeAutoStart(command.start, command.headless).where('running').found().all(function(vm) {
        return vm.open(url, command.wait);
      });
    }));
  });
};
