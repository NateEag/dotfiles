// Generated by CoffeeScript 1.6.3
var Q, cli;

Q = require('q');

cli = require('../cli');

module.exports = function(program) {
  return program.command('restart [names]').description('restart virtual machines').option('-s, --start', 'start virtual machine if not running').option('-h, --headless', 'start in headless (non-gui) mode if not running').action(function(names, command) {
    return cli.fail(cli.find(names, '!missing').maybeWhere(!command.start, 'running').found().then(function(vms) {
      return Q.all([
        cli.dsl(vms).where('running').all(function(vm) {
          return vm.restart();
        }), cli.dsl(vms).where('!running').all(function(vm) {
          return vm.start(command.headless);
        })
      ]);
    }));
  });
};
