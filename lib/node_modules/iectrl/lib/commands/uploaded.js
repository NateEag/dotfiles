// Generated by CoffeeScript 1.6.3
var cli, moment;

moment = require('moment');

cli = require('../cli');

module.exports = function(program) {
  return program.command('uploaded [names]').description('report the last time the VM was uploaded to modern.ie').action(function(names, command) {
    return cli.fail(cli.find(names).found().then(function(vms) {
      return cli.dsl(vms).all((function(vm) {
        return vm.uploaded();
      }), true).then(function(uploaded) {
        var i, relDate, vm, _i, _len, _results;
        _results = [];
        for (i = _i = 0, _len = vms.length; _i < _len; i = ++_i) {
          vm = vms[i];
          relDate = moment(uploaded[i]).fromNow();
          _results.push(console.log(cli.columns(vm.name, relDate, uploaded[i])));
        }
        return _results;
      });
    }));
  });
};
