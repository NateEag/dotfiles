#! /bin/bash

# Simple wrapper around notification commands and sleep to send messages after
# a set amount of time has passed.

script_name=$(basename "$0")
usage_msg="Send a notification after a certain amount of time has passed.

Usage: $script_name <message> <minutes> [<seconds>]"

if [ "$1" = '--help' ]; then
    echo "$usage_msg"

    exit
elif [ $# -lt 2 ] || [ $# -gt 3 ]; then
    echo "$usage_msg" >&2

    exit 2
fi

seconds="$(( $2 * 60 ))"

if [ $# -eq 3 ]; then
    seconds="$(( $seconds + $3 ))"
fi

# FIXME Figure out why this has started firing an alert that says
# "terminal-notifier.app "
applescript="display notification \"$1\" with title \"Time's up\" "
$(sleep "$seconds" && osascript -e "$applescript") &
